### 커널

커널(kernel) 이란, 사물의 중심이란 뜻을 가지며 운영체제의 중심을 의미한다. 보통 커널은 하나의 프로그램으로 구성되어 컴퓨터를 구성하는 모든 하드웨어와 소프트웨어를 관리한다.

리눅스의 루트 경로(/)에서 ls 명령어를 실행해 보면 vmlinuz나 vmlinux, vmlinuz-X.X.X라는 이름의 파일이 있을 것이다. 혹은 /boot 디렉터리에 있을 수도 있다. 이것이 리눅스 커널의 본체다.

엄밀히 말해 '리눅스'라고 하면 오직 커널만을 의미한다. 리눅스를 만든 리눅스 토발즈(Linus Torvalds)가 관리하는 것도 커널뿐이다. 이 책에서도 리눅스 운영체제라고 하면 커널뿐만 아니라 다른 소픝웨어가 포함된 것을 말하고, 리눅스는 오직 커널만을 의미하는 용어로 사용하도록 하겠다.

### 디바이스와 디바이스 드라이버

커널의 중요한 역할 중 하나가 컴퓨터의 하드웨어를 관리하는 것이다. 커널이 관리하는 하드웨어에는 다음과 같은 것들이 있다.

    - cpu
    - 메모리
    - HDD(Hard Disk Drive)
    - SSD(Solid State Drive)
    - DVD-ROM 드라이브
    - CD-ROM 드라이브
    - 그래픽 어댑터(화면을 모니터에 전달)
    - 네트워크 어댑터
    - 사운드 카드
    - 시계(하드웨어 클록)

이와 같은 물리적인 부품을 디바이스(device)라고 한다. 커널은 위에 나열한 디바이스들을 총괄한다.  
그런데 HDD에도 여러 종류가 있고 종류별로 조작 방법이 다 다르다. 따라서 종류가 HDD가 세 개 있다면, 커널에도 이에 대응한 어댑터 코드가 세 개 필요하다. 이러한 디바이스를 다루는 코드는 다음 그림과 같이 필요에 따라 커널에 적재할 수 있도록 디자인 되어 있다.  
<img src="./img/device_drive's_role.png">  
이렇게 특정 디바이스를 조작하는 소프트웨어를 디바이스 드라이버(Device Driver)라고 한다.

### 시스템 콜

하드웨어를 직접 다루는 건 커널만이 할 수 있기 때문에 일반 프로그램은 하드웨어를 조작하기 위해 커널에 의뢰해야만 한다. 커널은 시스템에서 가장 높은 위치에 있는 통치자이기도 하지만, 이처럼 밑바닥에서 혹사당하는 프로그램이기도 한 것이다.

일반 프로그램이 커널에 디바이스 조작 작업을 의뢰하기 위해 사용하는 것이 시스템 콜(system call)이다. 시스템 콜이란 이름에서 시스템은 커널을 말하며, 커널을 부른다(call)는 의미에서 시스템 콜이라 한다. 구체적으로는 다음과 같은 시스템 콜이 존재한다.

    - open
    - read
    - write
    - fork
    - exec
    - stat
    - unlink

시스템 콜이라 해서 복잡한 호출 방법이 있는 것은 아니다. 다음은 read 시스템 콜을 호출하는 한 줄 코드다.

    n = read(fd, buf, sizeof buf);

이처럼 시스템 콜을 호출하는 코드는 겉으로 봤을 때는 일반 함수를 사용하는 것과 큰 차이가 없다.

### 리눅스에 대한 이해

지금까지 알아본 바에 의하면 리눅스의 핵심에는 커널이 있고, 이 커널에 일을 맡기기 위해 시스템 콜을 사용한다. 리눅스의 세 가지 중요 개념인 파일 시스템, 프로세스, 스트림도 시스템 콜을 통해 동작한다. 즉, 리눅스를 이해하는 중심에 시스템 콜이 있다.

---

## 2.2 라이브러리

### 라이브러리와 라이브러리 함수

우리가 프로그램을 작성할 때 시스템 콜 이외에도 사용할 수 있는 함수가 있다.
